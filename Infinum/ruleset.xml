<?xml version="1.0"?>
<ruleset name="Infinum" namespace="Infinum">
  <description>Infinum internal coding standards for WordPress</description>

  <config name="installed_paths" value="vendor/wp-coding-standards/wpcs"/>

  <!-- Exclude node and composer folders -->
  <exclude-pattern>vendor/*</exclude-pattern>
  <exclude-pattern>node_modules/*</exclude-pattern>
  <exclude-pattern>*/data/*</exclude-pattern>

  <!-- Only check php code, linters are checking js and css -->
  <arg name="extensions" value="php"/>

  <!-- Enable colors in report -->
  <arg name="colors"/>

  <!-- Add source codes in the report -->
  <arg value="s"/>

  <!-- Load WordPress Coding standards - these include Extra, Core and VIP -->
  <rule ref="WordPress"/>

  <!-- We work with modified VIP standard -->
  <rule ref="WordPress-VIP">
    <exclude name="WordPress.VIP.FileSystemWritesDisallow" />
    <exclude name="WordPress.VIP.RestrictedFunctions" />
    <exclude name="WordPress.VIP.RestrictedVariables" />
    <exclude name="WordPress.VIP.SuperGlobalInputUsage" />
    <exclude name="WordPress.VIP.DirectDatabaseQuery" />
    <exclude name="WordPress.PHP.YodaConditions" />
  </rule>

  <!-- Modify post per page limit -->
  <rule ref="WordPress.VIP.PostsPerPage">
    <properties>
      <property name="posts_per_page" value="1000"/>
    </properties>
  </rule>

  <!-- Disable check for translators comments, precision alignment and multiple statement alignment -->
  <rule ref="WordPress">
    <exclude name="WordPress.WP.I18n.TranslatorsCommentWrongStyle" />
    <exclude name="WordPress.WP.I18n.MissingTranslatorsComment" />
    <exclude name="WordPress.WhiteSpace.PrecisionAlignment" />
    <exclude name="WordPress.Arrays.MultipleStatementAlignment" />
  </rule>

  <!-- Tabs should represent 2 spaces. -->
  <arg name="tab-width" value="2"/>

  <!-- Set the default indent value and force spaces instead of tabs -->
  <rule ref="WordPress">
    <exclude name="Generic.WhiteSpace.DisallowSpaceIndent" />
  </rule>
  <rule ref="Generic.WhiteSpace.ScopeIndent">
    <properties>
      <property name="indent" value="2"/>
      <property name="tabIndent" value="false"/>
    </properties>
  </rule>
  <rule ref="Generic.WhiteSpace.DisallowTabIndent" />

  <rule ref="PEAR.Functions.FunctionCallSignature">
    <properties>
      <property name="indent" value="2"/>
    </properties>
  </rule>

  <!-- Set minimum supported version for deprecated functions -->
  <rule ref="WordPress.WP.DeprecatedFunctions">
    <properties>
      <property name="minimum_supported_version" value="4.4" />
    </properties>
  </rule>

  <!-- Allow theme hierarchy specific file name exceptions -->
  <rule ref="WordPress.Files.FileName">
    <properties>
      <property name="is_theme" value="true" />
    </properties>
  </rule>

  <!-- Disallow _ in file names, except in a certain files -->
  <rule ref="WordPress.Files.FileName.NotHyphenatedLowercase">
    <exclude-pattern>*/sections/*</exclude-pattern>
  </rule>

  <!-- Forbidden space after function keyword and open parenthesis -->
  <rule ref="WordPress.WhiteSpace.ControlStructureSpacing">
    <properties>
      <property name="spaces_before_closure_open_paren" value="0" />
      <property name="blank_line_check" value="false" />
    </properties>
  </rule>

  <!-- Don't worry about files that don't contain any code -->
  <rule ref="Internal.NoCodeFound">
    <severity>0</severity>
  </rule>

  <!-- Allow certain DOMDocument methods as safe camelCase words -->
  <rule ref="WordPress.NamingConventions.ValidVariableName">
    <properties>
        <property name="customPropertiesWhitelist" type="array" value="nodeType,tagName,childNodes,wholeText,nodeValue,nodeName,documentElement,DOMDocument"/>
    </properties>
  </rule>

</ruleset>
