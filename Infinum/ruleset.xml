<?xml version="1.0"?>
<ruleset name="Infinum" namespace="Infinum">
  <description>Infinum coding standards for WordPress</description>

  <config name="installed_paths" value="vendor/wp-coding-standards/wpcs"/>

  <!-- Exclude certain patterns -->
  <exclude-pattern>/vendor/*</exclude-pattern>
  <exclude-pattern>/node_modules/*</exclude-pattern>
  <exclude-pattern>*/data/*</exclude-pattern>
  <exclude-pattern>*/tests/*</exclude-pattern>
  <exclude-pattern>*.js</exclude-pattern>
  <exclude-pattern>*.css</exclude-pattern>

  <!-- Only check php code, linters are used for checking js and css -->
  <arg name="extensions" value="php"/>

  <!-- Enable colors in report -->
  <arg name="colors"/>

  <!-- Add source codes in the report -->
  <arg value="s"/>

  <!-- Load WordPress Coding standards -->
  <rule ref="WordPress-Core"/>
  <rule ref="WordPress-Docs"/>
  <rule ref="WordPress-Extra"/>

  <!-- Add checking for unused function parameters. -->
  <rule ref="Generic.CodeAnalysis.UnusedFunctionParameter"/>

  <!-- Check against minimum WP version. -->
  <config name="minimum_supported_wp_version" value="4.7"/>

  <!-- Exclude certain rules -->
  <rule ref="WordPress">
    <exclude name="WordPress.DB.DirectDatabaseQuery" />
    <exclude name="WordPress.PHP.YodaConditions" />
  </rule>

  <!-- Modify post per page limit -->
  <rule ref="WordPress.WP.PostsPerPage">
    <properties>
      <property name="posts_per_page" value="1000"/>
    </properties>
  </rule>

  <!-- Disable check for translators comments, precision alignment and multiple statement alignment -->
  <rule ref="WordPress">
    <exclude name="WordPress.WP.I18n.TranslatorsCommentWrongStyle" />
    <exclude name="WordPress.WP.I18n.MissingTranslatorsComment" />
    <exclude name="WordPress.WhiteSpace.PrecisionAlignment" />
    <exclude name="WordPress.Arrays.MultipleStatementAlignment" />
    <exclude name="Generic.WhiteSpace.DisallowSpaceIndent" />
  </rule>

  <!-- Set the default indent value and force spaces instead of tabs -->
  <rule ref="WordPress.Arrays.ArrayIndentation">
    <properties>
      <property name="tabIndent" value="false"/>
    </properties>
  </rule>

  <rule ref="Generic.WhiteSpace.ScopeIndent">
    <properties>
      <property name="indent" value="2"/>
      <property name="tabIndent" value="false"/>
    </properties>
  </rule>

  <rule ref="Generic.WhiteSpace.DisallowTabIndent" />

  <rule ref="PEAR.Functions.FunctionCallSignature">
    <properties>
      <property name="indent" value="2"/>
    </properties>
  </rule>

  <!-- Set minimum supported version for deprecated functions -->
  <rule ref="WordPress.WP.DeprecatedFunctions">
    <properties>
      <property name="minimum_supported_version" value="4.7" />
    </properties>
  </rule>

  <!-- Allow theme hierarchy specific file name exceptions -->
  <rule ref="WordPress.Files.FileName">
    <properties>
      <property name="is_theme" value="true" />
    </properties>
  </rule>

  <!-- Disallow _ in file names, except in a certain files -->
  <rule ref="WordPress.Files.FileName.NotHyphenatedLowercase">
    <exclude-pattern>*/sections/*</exclude-pattern>
  </rule>

  <!-- Forbidden space after function keyword and open parenthesis -->
  <rule ref="WordPress.WhiteSpace.ControlStructureSpacing">
    <properties>
      <property name="spaces_before_closure_open_paren" value="0" />
    </properties>
  </rule>

  <!-- Don't worry about files that don't contain any code -->
  <rule ref="Internal.NoCodeFound">
    <severity>0</severity>
  </rule>

  <!-- Tabs should represent 2 spaces. -->
  <arg name="tab-width" value="2" />
</ruleset>
